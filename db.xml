<mxfile host="app.diagrams.net">
  <diagram name="ERD AutoFeedback">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- submit -->
        <mxCell id="submit" value="submit&#10;----------------&#10;id (PK)&#10;user_id&#10;asr_type&#10;audio_path&#10;created_at"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;"
          vertex="1" parent="1">
          <mxGeometry x="400" y="200" width="220" height="160" as="geometry"/>
        </mxCell>

        <!-- transcript -->
        <mxCell id="transcript" value="transcript&#10;----------------&#10;id (PK)&#10;submit_id (FK)&#10;word_index&#10;word&#10;prob&#10;start&#10;end"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;"
          vertex="1" parent="1">
          <mxGeometry x="100" y="50" width="240" height="200" as="geometry"/>
        </mxCell>

        <!-- fluency -->
        <mxCell id="fluency" value="fluency&#10;----------------&#10;id (PK)&#10;submit_id (FK)&#10;speed_rate&#10;pause_ratio"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;"
          vertex="1" parent="1">
          <mxGeometry x="100" y="300" width="240" height="140" as="geometry"/>
        </mxCell>

        <!-- lexical -->
        <mxCell id="lexical" value="lexical&#10;----------------&#10;id (PK)&#10;submit_id (FK)&#10;ttr&#10;mttr&#10;A1 A2 B1 B2 C1"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;"
          vertex="1" parent="1">
          <mxGeometry x="700" y="50" width="240" height="180" as="geometry"/>
        </mxCell>

        <!-- pronunciation -->
        <mxCell id="pronunciation" value="pronunciation&#10;----------------&#10;id (PK)&#10;submit_id (FK)&#10;score_0_50&#10;score_50_70&#10;score_70_85&#10;score_85_95&#10;score_95_100"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;"
          vertex="1" parent="1">
          <mxGeometry x="700" y="280" width="260" height="220" as="geometry"/>
        </mxCell>

        <!-- feedback -->
        <mxCell id="feedback" value="feedback&#10;----------------&#10;id (PK)&#10;submit_id (FK)&#10;feedback"
          style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;"
          vertex="1" parent="1">
          <mxGeometry x="400" y="450" width="220" height="120" as="geometry"/>
        </mxCell>

        <!-- edges -->
        <mxCell id="e1" style="endArrow=block;" edge="1" parent="1" source="transcript" target="submit">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e2" style="endArrow=block;" edge="1" parent="1" source="fluency" target="submit">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e3" style="endArrow=block;" edge="1" parent="1" source="lexical" target="submit">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e4" style="endArrow=block;" edge="1" parent="1" source="pronunciation" target="submit">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="e5" style="endArrow=block;" edge="1" parent="1" source="feedback" target="submit">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
